# I18n.vue

## Overview
An internationalization component that provides a dropdown menu for language selection. Integrates with Vue I18n for seamless language switching with customizable positioning.

## Props Interface

```typescript
interface Props {
  languages: I18nLanguage[]   // Array of available language options
  location?: any              // Menu positioning (default: 'bottom end')
}
```

### I18nLanguage Interface
```typescript
interface I18nLanguage {
  i18nLang: string    // Language code (e.g., 'en', 'es', 'fr')
  label: string       // Display name (e.g., 'English', 'Español')
  // Additional properties may be available from layouts/types
}
```

## Events Emitted
None - component handles language changes internally through Vue I18n.

## Slots Available
None - component has a fixed UI structure.

## Global State Dependencies

### Vue I18n Integration
- Uses `useI18n()` composable with global scope
- Reads and updates the `locale` reactive property
- Automatically syncs with application language state

## Internal Methods and Computed Properties

### Composables Used
- `useI18n({ useScope: 'global' })`: Access to global i18n instance

### Reactive Properties
- `locale`: Current active language from Vue I18n

## Component Dependencies

### Custom Components
- `IconBtn`: Icon button for the dropdown trigger

### Vuetify Components
- `VIcon`: Translate icon (mdi-translate)
- `VMenu`: Dropdown menu container
- `VList`: Language options container
- `VListItem`: Individual language options
- `VListItemTitle`: Language label display

## Usage Examples

### Basic Usage
```vue
<template>
  <I18n :languages="supportedLanguages" />
</template>

<script setup>
const supportedLanguages = [
  { i18nLang: 'en', label: 'English' },
  { i18nLang: 'es', label: 'Español' },
  { i18nLang: 'fr', label: 'Français' },
  { i18nLang: 'de', label: 'Deutsch' }
]
</script>
```

### Custom Menu Position
```vue
<template>
  <I18n 
    :languages="languages" 
    location="top start"
  />
</template>
```

### In Toolbar/Header
```vue
<template>
  <VAppBar>
    <VAppBarTitle>My App</VAppBarTitle>
    <VSpacer />
    
    <!-- Language Selector -->
    <I18n :languages="availableLanguages" />
    
    <!-- Other toolbar items -->
    <VBtn icon>
      <VIcon>mdi-account</VIcon>
    </VBtn>
  </VAppBar>
</template>

<script setup>
import { themeConfig } from '@themeConfig'

const availableLanguages = themeConfig.app.i18n.langConfig
</script>
```

### In Settings Panel
```vue
<template>
  <VCard>
    <VCardTitle>Language Settings</VCardTitle>
    <VCardText>
      <div class="d-flex align-center justify-space-between">
        <VLabel>Select Language</VLabel>
        <I18n 
          :languages="languages"
          location="bottom start"
        />
      </div>
    </VCardText>
  </VCard>
</template>
```

### With Dynamic Language Loading
```vue
<template>
  <I18n 
    :languages="dynamicLanguages" 
    @language-change="handleLanguageChange"
  />
</template>

<script setup>
const dynamicLanguages = ref([])

onMounted(async () => {
  // Load available languages from API
  dynamicLanguages.value = await fetchAvailableLanguages()
})

const handleLanguageChange = (newLocale) => {
  // Custom logic after language change
  console.log('Language changed to:', newLocale)
  
  // Could reload specific content, update user preferences, etc.
  await updateUserLanguagePreference(newLocale)
}
</script>
```

## Menu Positioning

The `location` prop accepts Vuetify's menu positioning values:

- `'bottom end'` (default)
- `'bottom start'`
- `'top end'`
- `'top start'`
- `'start'`
- `'end'`
- And other Vuetify location options

## Language Selection Behavior

### Selection Process
1. User clicks the translate icon
2. Menu opens showing available languages
3. Current language is highlighted (selected state)
4. User clicks a language option
5. Vue I18n locale is updated automatically
6. Menu closes
7. Application UI updates to new language

### Visual Feedback
- Current language is visually highlighted in the list
- Uses Vuetify's selection styling with primary color
- Smooth menu animations

## Styling Features

### Icon Button
- 22px translate icon (mdi-translate)
- Standard icon button styling
- Consistent with other toolbar/header elements

### Menu Styling
- 175px width for optimal language name display
- 21px offset from trigger button
- Primary color for selected language
- Clean list styling

## Integration with Theme Config

```vue
<script setup>
import { themeConfig } from '@themeConfig'

// Use theme configuration languages
const languages = themeConfig.app.i18n.langConfig
</script>

<template>
  <I18n :languages="languages" />
</template>
```

## Accessibility Features

- Semantic button structure through IconBtn
- Proper list navigation with VList
- Clear visual indication of current selection
- Keyboard navigation support
- Screen reader friendly with proper labels

## Best Practices

1. **Language Data**: Use centralized language configuration
2. **Positioning**: Choose appropriate menu position based on layout
3. **Feedback**: Provide visual feedback for language changes
4. **Persistence**: Consider saving language preference
5. **Loading**: Handle dynamic language loading gracefully

## Common Integration Patterns

### With Router
```vue
<script setup>
const { locale } = useI18n()
const router = useRouter()

watch(locale, (newLocale) => {
  // Update route with new locale if using i18n routing
  router.push({ 
    ...router.currentRoute.value,
    params: { 
      ...router.currentRoute.value.params,
      locale: newLocale 
    }
  })
})
</script>
```

### With User Preferences
```vue
<script setup>
const { locale } = useI18n()

watch(locale, async (newLocale) => {
  // Save to user preferences
  await updateUserPreference('language', newLocale)
  
  // Could also save to localStorage
  localStorage.setItem('preferredLanguage', newLocale)
})
</script>
```

This component provides a standardized way to implement language switching across the application while maintaining design consistency and proper i18n integration.